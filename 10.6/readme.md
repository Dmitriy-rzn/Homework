# 10.06. Инцидент-менеджмент

Что было, как выглядело для пользователя ?

запись/комментарий визуально отображаются а после перезагрузки — пропадают, не работали хуки.

Когда и в течении какого времени происходила проблема?

21 октября в 22:52 UTC началась частичная недоступность сервисов GitHub и продолжалась в течение 24 часов и 11 минут.


Как много пользователей затронуло?

Всех пользователей кто хотел создать issue, оставить комментарий


Техническое описание, причины.

Потеря согласованности между БД в датацентре на Восточном и Западном побережье,вследствии потери связя на 43 секунды, между US East Coast network hub и US East Coast data cente, после технического обслуживания оптического сетевого оборудования.

Реагирование

21 октября 2018 22:54 UTC пошли оповещения системы мониторинга, В 23:11 UTC подключился координатор инцидента

Восстановление работоспособности

24 часа и 11 минут


Хронология:

* 21 октября 2018, 22:52 UTC  потеря связи между датацентрами  
* 21 октября 2018 22:54 UTC  системы мониторинга показывают нестандартную ситуацию  
* 21 октября 2018 23:02 UTC  инженеры группы быстрого реагирования определили проблему в БД  
* 21 октября 2018 23:07 UTC внутренние инструменты развертываний переведены в режим read-only  
* 21 октября 2018 23:09 UTС статус работоспособности GitHub -- жёлтый, автоматически оповещен координатор инцидента  
* 21 октября 2018 23:11 UTC координатор инцидента принял решение установить статус -- красный  
* 21 октября 2018 23:13 UTC весь сервис переведен в режим read-only  
* 21 Октября 2018 23:19 UTC отключены webhook's и Github Pages  
* 22 октября 2018 00:05 UTC принято решение восстановить базу из бэкапа и провести синхронизацию кластера  
* 22 октября 2018 00:41 UTC запущено восстановление бекапов  
* 22 Октября 2018 06:51 UTC несколько кластеров Восточного побережья восстановлены и начали репликацию с Западного побережья  
* 22 Октября 2018 07:46 UTC оповещение пользователей в сети о наличии проблемы и ходе решения  
* 22 октября 2018 11:12 UTC все БД на Восточном побережье восстановлены  
* 22 октября 2018 16:24 UTC ввосстановление бэкапов завершено реплики синхронизированы  
* 22 октября 2018 16:45 UTC начало обработки отложенных данных  
* 22 Октябрь 2018 23:03 UTC статус сервиса -- зеленый  

Что делать, чтобы этого не повторилось ?

Оркестратор не должен меня на primary БД в другом регионе, чтобы не нарушать топологию;   
Система мониторинга должна предоставлять  более точную и чёткую информацию о проблеме;   
Увеличить резервирование информации на уровне датацетров  
Необходимость внедрения практик Хаос-инжиниринга   
